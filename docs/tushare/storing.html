
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>TuShare -财经数据接口包</title>
    <meta content="开源股票数据接口 股票数据 股票数据接口 免费股票数据 python股票数据" name="keywords"/>
    <meta name="description" content="TuShare为金融数据分析提供便捷、快速的接口，与pandas无缝对接"/>
	<meta content="index,follow" name="robots"/>
	<meta content="TuShare" name="Jimmy Liu"/>
    <meta name="application-name" content="兔享"/>
	<script src="http://tjs.sjs.sinajs.cn/open/api/js/wb.js" type="text/javascript" charset="utf-8"></script>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.2.9',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="TuShare 0.2.9 documentation" href="index.html" />
    <link rel="next" title="关于捐助" href="donate.html" />
    <link rel="prev" title="银行间同业拆放利率" href="shibor.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li><a href="index.html">TuShare 0.2.9 documentation</a> &raquo;</li> 
      </ul>
	  <wb:follow-button uid="1304687120" type="red_1" width="67" height="24" style="position:absolute;top:0;right:0;border:0;z-index:1000;width:260px"></wb:follow-button>
      <a target="_blank" href="https://github.com/waditu/tushare">
      	<img alt="Fork me on GitHub" src="_static/fork.png" style="position:absolute;top:0;right:0;border:0;z-index:1000;width:149px" id="fork-image">
      </a>
    </div>
<div class="content-wrapper">
    <div class="content">
        <div class="document">
            <div class="sphinxsidebar">
                <h3>Table Of Contents</h3>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="index.html">前言</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#id2">致谢</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#id3">使用对象</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#id4">使用前提</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#id5">下载安装</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#id6">版本升级</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#id7">版本信息</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="trading.html">交易数据</a><ul>
<li class="toctree-l2"><a class="reference internal" href="trading.html#id2">历史行情</a></li>
<li class="toctree-l2"><a class="reference internal" href="trading.html#id3">复权数据</a></li>
<li class="toctree-l2"><a class="reference internal" href="trading.html#id4">实时行情</a></li>
<li class="toctree-l2"><a class="reference internal" href="trading.html#id5">历史分笔</a></li>
<li class="toctree-l2"><a class="reference internal" href="trading.html#id6">实时分笔</a></li>
<li class="toctree-l2"><a class="reference internal" href="trading.html#id7">当日历史分笔</a></li>
<li class="toctree-l2"><a class="reference internal" href="trading.html#id8">大盘指数行情列表</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="reference.html">投资参考数据</a><ul>
<li class="toctree-l2"><a class="reference internal" href="reference.html#id2">分配预案</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference.html#id3">业绩预告</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference.html#id4">限售股解禁</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference.html#id5">基金持股</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference.html#id6">新股数据</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference.html#id7">融资融券（沪市）</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference.html#id8">融资融券（深市）</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="classifying.html">股票分类数据</a><ul>
<li class="toctree-l2"><a class="reference internal" href="classifying.html#id2">行业分类</a></li>
<li class="toctree-l2"><a class="reference internal" href="classifying.html#id3">概念分类</a></li>
<li class="toctree-l2"><a class="reference internal" href="classifying.html#id4">地域分类</a></li>
<li class="toctree-l2"><a class="reference internal" href="classifying.html#id5">中小板分类</a></li>
<li class="toctree-l2"><a class="reference internal" href="classifying.html#id6">创业板分类</a></li>
<li class="toctree-l2"><a class="reference internal" href="classifying.html#id7">风险警示板分类</a></li>
<li class="toctree-l2"><a class="reference internal" href="classifying.html#id8">沪深300成份及权重</a></li>
<li class="toctree-l2"><a class="reference internal" href="classifying.html#id9">上证50成份股</a></li>
<li class="toctree-l2"><a class="reference internal" href="classifying.html#id10">中证500成份股</a></li>
<li class="toctree-l2"><a class="reference internal" href="classifying.html#id11">终止上市股票列表</a></li>
<li class="toctree-l2"><a class="reference internal" href="classifying.html#id12">暂停上市股票列表</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="fundamental.html">基本面数据</a><ul>
<li class="toctree-l2"><a class="reference internal" href="fundamental.html#id2">股票列表</a></li>
<li class="toctree-l2"><a class="reference internal" href="fundamental.html#id3">业绩报告（主表）</a></li>
<li class="toctree-l2"><a class="reference internal" href="fundamental.html#id4">盈利能力</a></li>
<li class="toctree-l2"><a class="reference internal" href="fundamental.html#id5">营运能力</a></li>
<li class="toctree-l2"><a class="reference internal" href="fundamental.html#id6">成长能力</a></li>
<li class="toctree-l2"><a class="reference internal" href="fundamental.html#id7">偿债能力</a></li>
<li class="toctree-l2"><a class="reference internal" href="fundamental.html#id8">现金流量</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="macro.html">宏观经济数据</a><ul>
<li class="toctree-l2"><a class="reference internal" href="macro.html#id2">存款利率</a></li>
<li class="toctree-l2"><a class="reference internal" href="macro.html#id3">贷款利率</a></li>
<li class="toctree-l2"><a class="reference internal" href="macro.html#id4">存款准备金率</a></li>
<li class="toctree-l2"><a class="reference internal" href="macro.html#id5">货币供应量</a></li>
<li class="toctree-l2"><a class="reference internal" href="macro.html#id6">货币供应量(年底余额)</a></li>
<li class="toctree-l2"><a class="reference internal" href="macro.html#id7">国内生产总值(年度)</a></li>
<li class="toctree-l2"><a class="reference internal" href="macro.html#id8">国内生产总值(季度)</a></li>
<li class="toctree-l2"><a class="reference internal" href="macro.html#gdp">三大需求对GDP贡献</a></li>
<li class="toctree-l2"><a class="reference internal" href="macro.html#id9">三大产业对GDP拉动</a></li>
<li class="toctree-l2"><a class="reference internal" href="macro.html#id10">三大产业贡献率</a></li>
<li class="toctree-l2"><a class="reference internal" href="macro.html#id11">居民消费价格指数</a></li>
<li class="toctree-l2"><a class="reference internal" href="macro.html#id12">工业品出厂价格指数</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="newsevent.html">新闻事件数据</a><ul>
<li class="toctree-l2"><a class="reference internal" href="newsevent.html#id2">即时新闻</a></li>
<li class="toctree-l2"><a class="reference internal" href="newsevent.html#id3">信息地雷</a></li>
<li class="toctree-l2"><a class="reference internal" href="newsevent.html#id4">新浪股吧</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="shibor.html">银行间同业拆放利率</a><ul>
<li class="toctree-l2"><a class="reference internal" href="shibor.html#shibor">Shibor拆放利率</a></li>
<li class="toctree-l2"><a class="reference internal" href="shibor.html#id2">银行报价数据</a></li>
<li class="toctree-l2"><a class="reference internal" href="shibor.html#id3">Shibor均值数据</a></li>
<li class="toctree-l2"><a class="reference internal" href="shibor.html#lpr">贷款基础利率（LPR）</a></li>
<li class="toctree-l2"><a class="reference internal" href="shibor.html#id4">LPR均值数据</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="storing.html">数据存储</a><ul>
<li class="toctree-l2"><a class="reference internal" href="storing.html#csv">CSV文件</a></li>
<li class="toctree-l2"><a class="reference internal" href="storing.html#excel">Excel文件</a></li>
<li class="toctree-l2"><a class="reference internal" href="storing.html#hdf5">HDF5文件</a></li>
<li class="toctree-l2"><a class="reference internal" href="storing.html#json">JSON文件</a></li>
<li class="toctree-l2"><a class="reference internal" href="storing.html#mysql">MySQL数据库</a></li>
<li class="toctree-l2"><a class="reference internal" href="storing.html#mongodb">MongoDB</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="donate.html">关于捐助</a></li>
</ul>

                

                <p>


            </div>
             
            <div class="documentwrapper">
                <div class="bodywrapper">
                    <div class="body">
                        
  <div class="section" id="id1">
<h1>数据存储<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<p><em>数据存储</em>模块主要是引导用户将数据保存在本地磁盘或数据库服务器上，便于后期的量化分析和回测使用，在以文件格式保存在电脑磁盘的方式上，调用的是pandas本身自带的方法，此处会罗列常用的参数和说明，另外，也会通过实例，展示操作的方法。在存入DataBase方面，也提供了简单的处理方式，本文将给出简单的python代码。</p>
<ul class="simple">
<li>保存为csv格式</li>
<li>保存为Excel格式</li>
<li>保存为HDF5文件格式</li>
<li>保存为JSON格式</li>
<li>存入MySQL等关系型数据库</li>
<li>存入NoSQL数据库</li>
</ul>
<div class="section" id="csv">
<h2>CSV文件<a class="headerlink" href="#csv" title="Permalink to this headline">¶</a></h2>
<p>pandas的DataFrame和Series对象提供了直接保存csv文件格式的方法，通过参数设定，轻松将数据内容保存在本地磁盘。</p>
<p>常用参数说明：</p>
<ul class="simple">
<li><strong>path_or_buf</strong>: csv文件存放路径或者StringIO对象</li>
<li><strong>sep</strong> : 文件内容分隔符，默认为,逗号</li>
<li><strong>na_rep</strong>: 在遇到NaN值时保存为某字符，默认为&#8217;&#8216;空字符</li>
<li><strong>float_format</strong>: float类型的格式</li>
<li><strong>columns</strong>: 需要保存的列，默认为None</li>
<li><strong>header</strong>: 是否保存columns名，默认为True</li>
<li><strong>index</strong>: 是否保存index，默认为True</li>
<li><strong>mode</strong> : 创建新文件还是追加到现有文件，默认为新建</li>
<li><strong>encoding</strong>: 文件编码格式</li>
<li><strong>date_format</strong>: 日期格式</li>
</ul>
<p>注：在设定path时，如果目录不存在，程序会提示IOError，请先确保目录已经存在于磁盘中。</p>
<p>调用方法：</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">tushare</span> <span class="kn">as</span> <span class="nn">ts</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">ts</span><span class="o">.</span><span class="n">get_hist_data</span><span class="p">(</span><span class="s">&#39;000875&#39;</span><span class="p">)</span>
<span class="c">#直接保存</span>
<span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s">&#39;c:/day/000875.csv&#39;</span><span class="p">)</span>

<span class="c">#选择保存</span>
<span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s">&#39;c:/day/000875.csv&#39;</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;open&#39;</span><span class="p">,</span><span class="s">&#39;high&#39;</span><span class="p">,</span><span class="s">&#39;low&#39;</span><span class="p">,</span><span class="s">&#39;close&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>追加数据的方式：</p>
<p>某些时候，可能需要将一些同类数据保存在一个大文件中，这时候就需要将数据追加在同一个文件里,简单举例如下：</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">tushare</span> <span class="kn">as</span> <span class="nn">ts</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="n">filename</span> <span class="o">=</span> <span class="s">&#39;c:/day/bigfile.csv&#39;</span>
<span class="k">for</span> <span class="n">code</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;000875&#39;</span><span class="p">,</span> <span class="s">&#39;600848&#39;</span><span class="p">,</span> <span class="s">&#39;000981&#39;</span><span class="p">]:</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">ts</span><span class="o">.</span><span class="n">get_hist_data</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
        <span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
</pre></div>
</div>
<p>【注：如果是不考虑header，直接df.to_csv(filename,
mode=&#8217;a&#8217;）即可，否则，每次循环都会把columns名称也append进去】</p>
</div>
<div class="section" id="excel">
<h2>Excel文件<a class="headerlink" href="#excel" title="Permalink to this headline">¶</a></h2>
<p>pandas将数据保存为MicroSoft Excel文件格式。</p>
<p>常用参数说明：</p>
<ul class="simple">
<li><strong>excel_writer</strong>: 文件路径或者ExcelWriter对象</li>
<li><strong>sheet_name</strong>:sheet名称，默认为Sheet1</li>
<li><strong>sep</strong> : 文件内容分隔符，默认为,逗号</li>
<li><strong>na_rep</strong>: 在遇到NaN值时保存为某字符，默认为&#8217;&#8216;空字符</li>
<li><strong>float_format</strong>: float类型的格式</li>
<li><strong>columns</strong>: 需要保存的列，默认为None</li>
<li><strong>header</strong>: 是否保存columns名，默认为True</li>
<li><strong>index</strong>: 是否保存index，默认为True</li>
<li><strong>mode</strong> : 创建新文件还是追加到现有文件，默认为新建</li>
<li><strong>encoding</strong>: 文件编码格式</li>
<li><strong>startrow</strong>: 在数据的头部留出startrow行空行</li>
<li><strong>startcol</strong> :在数据的左边留出startcol列空列</li>
</ul>
<p>调用方法：</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">tushare</span> <span class="kn">as</span> <span class="nn">ts</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">ts</span><span class="o">.</span><span class="n">get_hist_data</span><span class="p">(</span><span class="s">&#39;000875&#39;</span><span class="p">)</span>
<span class="c">#直接保存</span>
<span class="n">df</span><span class="o">.</span><span class="n">to_excel</span><span class="p">(</span><span class="s">&#39;c:/day/000875.xlsx&#39;</span><span class="p">)</span>

<span class="c">#设定数据位置（从第3行，第6列开始插入数据）</span>
<span class="n">df</span><span class="o">.</span><span class="n">to_excel</span><span class="p">(</span><span class="s">&#39;c:/day/000875.xlsx&#39;</span><span class="p">,</span> <span class="n">startrow</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">startcol</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="hdf5">
<h2>HDF5文件<a class="headerlink" href="#hdf5" title="Permalink to this headline">¶</a></h2>
<p>pandas利用PyTables包将数据保存为HDF5格式的文件。需要确认的是，运行时PyTables包的版本需要
&gt;=3.0.0。</p>
<p>常用参数说明：</p>
<ul class="simple">
<li><strong>path_or_buf</strong>: 文件路径或者HDFStore对象</li>
<li><strong>key</strong>:HDF5中的group标识</li>
<li><strong>mode</strong> : 包括 {‘a’追加, ‘w’写入, ‘r’只读,
‘r+’等同于a但文件必须已经存在}, 默认是 ‘a’</li>
<li><strong>format</strong>:‘fixed(f)|table(t)’,默认‘fixed’，f适合快速读写，不能追加数据
t适合从文件中查找和选择数据</li>
<li><strong>append</strong>: 适用于table(t)模式追加数据，默认Flase</li>
<li><strong>complevel</strong>: 压缩级别1-9, 默认0</li>
<li><strong>complib</strong>: 压缩类型{‘zlib’, ‘bzip2’, ‘lzo’, ‘blosc’, None}默认None</li>
</ul>
<p>调用方法：</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">tushare</span> <span class="kn">as</span> <span class="nn">ts</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">ts</span><span class="o">.</span><span class="n">get_hist_data</span><span class="p">(</span><span class="s">&#39;000875&#39;</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">to_hdf</span><span class="p">(</span><span class="s">&#39;c:/day/hdf.h5&#39;</span><span class="p">,</span><span class="s">&#39;000875&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>方法2：</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">tushare</span> <span class="kn">as</span> <span class="nn">ts</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">ts</span><span class="o">.</span><span class="n">get_hist_data</span><span class="p">(</span><span class="s">&#39;000875&#39;</span><span class="p">)</span>
<span class="n">store</span> <span class="o">=</span> <span class="n">HDFStore</span><span class="p">(</span><span class="s">&#39;c:/day/store.h5&#39;</span><span class="p">)</span>
<span class="n">store</span><span class="p">[</span><span class="s">&#39;000875&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span>
<span class="n">store</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="json">
<h2>JSON文件<a class="headerlink" href="#json" title="Permalink to this headline">¶</a></h2>
<p>pandas生成Json格式的文件或字符串。</p>
<p>常用参数说明：</p>
<ul class="simple">
<li><strong>path_or_buf</strong>: json文件存放路径</li>
<li><strong>orient</strong>:json格式顺序，包括columns，records，index，split，values，默认为columns</li>
<li><strong>force_ascii</strong>: 将字符转ASCII，默认为True</li>
</ul>
<p>调用方法：</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">tushare</span> <span class="kn">as</span> <span class="nn">ts</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">ts</span><span class="o">.</span><span class="n">get_hist_data</span><span class="p">(</span><span class="s">&#39;000875&#39;</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="s">&#39;c:/day/000875.json&#39;</span><span class="p">,</span><span class="n">orient</span><span class="o">=</span><span class="s">&#39;records&#39;</span><span class="p">)</span>

<span class="c">#或者直接使用</span>
<span class="k">print</span> <span class="n">df</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">orient</span><span class="o">=</span><span class="s">&#39;records&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="mysql">
<h2>MySQL数据库<a class="headerlink" href="#mysql" title="Permalink to this headline">¶</a></h2>
<p>pandas提供了将数据便捷存入关系型数据库的方法，在新版的pandas中，主要是已sqlalchemy方式与数据建立连接，支持MySQL、Postgresql、Oracle、MS
SQLServer、SQLite等主流数据库。本例以MySQL数据库为代表，展示将获取到的股票数据存入数据库的方法,其他类型数据库请参考sqlalchemy官网文档的create_engine部分。</p>
<p>常用参数说明：</p>
<ul class="simple">
<li><strong>name</strong>:表名，pandas会自动创建表结构</li>
<li><strong>con</strong>：数据库连接，最好是用sqlalchemy创建engine的方式来替代con</li>
<li><strong>flavor</strong>:数据库类型 {‘sqlite’, ‘mysql’},
默认‘sqlite’，如果是engine此项可忽略</li>
<li><strong>schema</strong>:指定数据库的schema，默认即可</li>
<li><strong>if_exists</strong>:如果表名已存在的处理方式 {‘fail’, ‘replace’,
‘append’},默认‘fail’</li>
<li><strong>index</strong>:将pandas的Index作为一列存入数据库，默认是True</li>
<li><strong>index_label</strong>:Index的列名</li>
<li><strong>chunksize</strong>:分批存入数据库，默认是None，即一次性全部写人数据库</li>
<li><strong>dtype</strong>:设定columns在数据库里的数据类型，默认是None</li>
</ul>
<p>调用方法：</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span>
<span class="kn">import</span> <span class="nn">tushare</span> <span class="kn">as</span> <span class="nn">ts</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">ts</span><span class="o">.</span><span class="n">get_tick_data</span><span class="p">(</span><span class="s">&#39;600848&#39;</span><span class="p">,</span> <span class="n">date</span><span class="o">=</span><span class="s">&#39;2014-12-22&#39;</span><span class="p">)</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s">&#39;mysql://user:passwd@127.0.0.1/db_name?charset=utf8&#39;</span><span class="p">)</span>

<span class="c">#存入数据库</span>
<span class="n">df</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s">&#39;tick_data&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>

<span class="c">#追加数据到现有表</span>
<span class="c">#df.to_sql(&#39;tick_data&#39;,engine,if_exists=&#39;append&#39;)</span>
</pre></div>
</div>
<div class="figure">
<img alt="" src="_images/mysql_d.png" />
</div>
</div>
<div class="section" id="mongodb">
<h2>MongoDB<a class="headerlink" href="#mongodb" title="Permalink to this headline">¶</a></h2>
<p>pandas目前没有提供直接存入MongoDB的方法，不过依然很简单，而且方式很多，用户可根据自身的业务特点选择存储的结构方式。</p>
<p>使用方法：</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">pymongo</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">conn</span> <span class="o">=</span> <span class="n">pymongo</span><span class="o">.</span><span class="n">Connection</span><span class="p">(</span><span class="s">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">27017</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">ts</span><span class="o">.</span><span class="n">get_tick_data</span><span class="p">(</span><span class="s">&#39;600848&#39;</span><span class="p">,</span><span class="n">date</span><span class="o">=</span><span class="s">&#39;2014-12-22&#39;</span><span class="p">)</span>

<span class="n">conn</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">tickdata</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">orient</span><span class="o">=</span><span class="s">&#39;records&#39;</span><span class="p">)))</span>
</pre></div>
</div>
<div class="figure">
<img alt="" src="_images/mongodb_d.png" />
</div>
</div>
</div>


                    </div>
                </div>
            </div>

            
            <div class="clearer"></div>
        </div>
    </div>
</div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li><a href="index.html">TuShare 0.2.9 documentation</a> &raquo;</li> 
      </ul>
	  <wb:follow-button uid="1304687120" type="red_1" width="67" height="24" style="position:absolute;top:0;right:0;border:0;z-index:1000;width:260px"></wb:follow-button>
      <a target="_blank" href="https://github.com/waditu/tushare">
      	<img alt="Fork me on GitHub" src="_static/fork.png" style="position:absolute;top:0;right:0;border:0;z-index:1000;width:149px" id="fork-image">
      </a>
    </div>
    <div class="footer">
        &copy; Copyright 2015, Jimmy Liu.
	waditu.
    </div>
  </body>
</html>